!function(){function t(){var t=$(this);t.hasClass("open")?t.find("ul").css("display","none"):t.find("ul").css("display","block"),t.toggleClass("open")}function e(){$(this).parent().find(".filename").html($(this).val())}$(document).delegate("li.submenu","click",t),$(document).delegate(".uploader input","change",e);var n=function(){var t=window.innerHeight;return"number"!=typeof t&&(t="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight),t-41-36}();$("div.container").css("min-height",n+"px")}(),function(t){function e(t){this.options={container:"",template:"",url:"",data:{}},$.extend(this.options,t),this.$container=$(this.options.container)}var n={mix:function(t,e,n){for(var a in e)t[e]&&n||(t[e]=n[e]);return t},toArray:function(t,e){return[].slice.call(t,e||0)},cookie:function(t,e,n){var a,i,o;return arguments.length>1?(n=n||30,(null===e||void 0===e)&&(n=-1),"number"==typeof n&&(a=24*n*60*60*1e3,i=n=new Date,i.setTime(i.getTime()+a)),e=String(e),document.cookie=[encodeURIComponent(t),"=",encodeURIComponent(e),"; expires=",n.toGMTString(),"; path='/'"].join("")):(o=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?decodeURIComponent(o[1]):null}};t.util=n,e.prototype={init:function(t){this.getPage(t)},setData:function(t){$.extend(this.options.data,t)},template:function(t,e){var n=Handlebars.compile($(t).html());return n(e)},getPage:function(t){var e=this,n=t||1,a=e.options.url+n;$.ajax({type:"GET",url:a,dataType:"json",async:!0,data:e.options.data,success:function(t){var n=t.items,a=t.pageinfo;e.$container.find(".page-data-list").html(e.template(e.options.template,n)),e.pagination(a)},error:function(){}})},pagination:function(t){var e=this,n=e.$container.find(".pagination"),a=e.$container.find(".datatable-info"),i=t.pagesize||10,o=(t.curpage-1)*i+1,r=t.curpage*i>=t.totalrows?t.totalrows:t.curpage*i;a.html("共"+t.totalrows+"条 当前展示第"+o+"条到第"+r+"条");for(var c='<li class="prev disabled"><a href="javascript:;"  data-page="pre">← 上一页</a>',l=0;l<t.totalpage;l++)c+="<li "+(l+1==t.curpage?'class="active"':"")+'><a href="javascript:;" data-page="'+(l+1)+'">'+(l+1)+"</a></li>";c+='<li class="next"><a href="javascript:;"  data-page="next">下一页 → </a></li>',n.html(c),n.data("curpage",t.curpage),n.data("totalpage",t.totalpage),e.addPaginationHandle(n)},addPaginationHandle:function(){var t=this,e=t.$container.find(".pagination");e.on("click","a",function(){var e=$(this),n=e.data("page");"pre"==n?t.prex():"next"==n?t.next():t.getPage(n)})},prex:function(){var t=this,e=t.$container.find(".pagination"),n=e.data("curpage")||0;console.log(n),n=n-1>0?n-1:1,t.getPage(n)},next:function(){var t=this,e=t.$container.find(".pagination"),n=e.data("curpage")||0,a=e.data("totalpage")||0;n=n+1>a?a:n+1,t.getPage(n)},reloadPage:function(){var t=this,e=t.$container.find(".pagination"),n=e.data("curpage")||0;t.getPage(n)}},t.Page=e}(window),function(t){t.fn.extend({validate:function(){for(var e=t(this),n=e.find("input"),a=function(e,n){var a=null;0==(a=e.next(".help-inline")).length&&(a=t("<div class='help-inline'></div>"),e.after(a)),1==arguments.length?a.hide():(a.html(n),a.show())},i=0,o=n.length;o>i;i++){var r=n.eq(i),c=r.attr("type");if(-1!="text/email/url/password/phonenumber/".indexOf(c)){var l,p,u,s,d,g,f;if(p=r.attr("max"),u=r.attr("min"),s=r.attr("error")||"输入内容格式错误",d=r.attr("require"),g=r.attr("require_msg")||"不能为空",f=r.attr("patterns"),l=r.val(),0==l.trim().length&&(l=""),len=l.length,"require"==d||l){if("require"==d&&!l)return a(r,g),!1;if(u&&len<u)return a(r,s),!1;if(p&&len>p)return a(r,s),!1;if(f){var h=new RegExp(f);if(!h.exec(l))return a(r,s),!1}a(r)}}}return!0}})}(jQuery);