!function(){$(function(){function t(){var t=$(this);t.hasClass("open")?t.find("ul").css("display","none"):t.find("ul").css("display","block"),t.toggleClass("open")}function e(){$(this).parent().find(".filename").html($(this).val())}$(document).delegate("li.submenu","click",t),$(document).delegate(".uploader input","change",e);var a=function(){var t=window.innerHeight;return"number"!=typeof t&&(t="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight),t-77}();$("div.container").css("min-height",a+"px")})}(),function(t){function e(t){this.options={container:"",template:"",url:"",data:{}},$.extend(this.options,t),this.$container=$(this.options.container)}var a={mix:function(t,e,a){for(var n in e)t[e]&&a||(t[e]=a[e]);return t},toArray:function(t,e){return[].slice.call(t,e||0)},cookie:function(t,e,a){var n,i,o;return arguments.length>1?(a=a||30,(null===e||void 0===e)&&(a=-1),"number"==typeof a&&(n=24*a*60*60*1e3,i=a=new Date,i.setTime(i.getTime()+n)),e=String(e),document.cookie=[encodeURIComponent(t),"=",encodeURIComponent(e),"; expires=",a.toGMTString(),"; path='/'"].join("")):(o=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?decodeURIComponent(o[1]):null}};t.util=a,e.prototype={init:function(t){this.getPage(t)},setData:function(t){$.extend(this.options.data,t)},template:function(t,e){var a=Handlebars.compile($(t).html());return a(e)},getPage:function(t){var e=this,a=t||1,n=e.options.url+a;$.ajax({type:"GET",url:n,dataType:"json",async:!0,data:e.options.data,success:function(t){if(null==t||null==t.items||0==t.items.length){e.$container.find(".page-data-list").html("");var a=e.$container.find(".pagination");a.html("");var n=e.$container.find(".datatable-info");return void n.html("共0条")}var i=t.items,o=t.pageinfo;e.$container.find(".page-data-list").html(e.template(e.options.template,i)),e.pagination(o)},error:function(){}})},pagination:function(t){var e=this;e.removePaginationHandle();var a=e.$container.find(".pagination"),n=e.$container.find(".datatable-info"),i=t.pagesize||10,o=(t.curpage-1)*i+1,r=t.curpage*i>=t.totalrows?t.totalrows:t.curpage*i;n.html("共"+t.totalrows+"条 当前展示第"+o+"条到第"+r+"条");var l=parseInt(t.curpage,10);if("1"==t.totalpage)return void a.html("");for(var c='<li  class="active"><a href="javascript:;"  data-page="'+l+'">'+l+" </a></li>",p=l-1,s=l+1,d="",u=parseInt(t.totalpage,10);p>l-4&&p>1;p--)c='<li><a href="javascript:;" data-page="'+p+'">'+p+"</a></li>"+c;for(1!=l&&(2==p?d='<li><a href="javascript:;"  data-page="2">2</a>':p>2&&(d='<li><a  href="javascript:;" class="blank">...</a></li>'),c='<li><a href="javascript:;"  data-page="1">1</a>'+d+c);l+4>s&&u>s;s++)c+='<li><a href="javascript:;" data-page="'+s+'">'+s+"</a></li>";l!=u&&(s==u-1?c+='<li><a href="javascript:;"  data-page="'+(u-1)+'">'+(u-1)+"</a>":u-1>s&&(c+='<li><a href="javascript:;" class="blank">...</a></li>'),c+='<li><a href="javascript:;"  data-page="'+t.totalpage+'">'+t.totalpage+" </a></li>"),a.html(c),a.data("curpage",t.curpage),a.data("totalpage",t.totalpage),e.addPaginationHandle(a)},addPaginationHandle:function(){var t=this,e=t.$container.find(".pagination");t.paginationHandle=function(e){e.preventDefault();var a=$(this),n=a.data("page");"pre"==n?t.prex():"next"==n?t.next():t.getPage(n)},e.delegate("a","click",t.paginationHandle)},removePaginationHandle:function(){var t=this;t.$container.find(".pagination").undelegate("a","click",t.paginationHandle)},prex:function(){var t=this,e=t.$container.find(".pagination"),a=e.data("curpage")||0;a=a-1>0?a-1:1,t.getPage(a)},next:function(){var t=this,e=t.$container.find(".pagination"),a=e.data("curpage")||0,n=e.data("totalpage")||0;a=a+1>n?n:a+1,t.getPage(a)},reloadPage:function(){var t=this,e=t.$container.find(".pagination"),a=e.data("curpage")||0;t.getPage(a)}},t.Page=e,t.addCookie=function(t,e,a){var n=t+"="+escape(e);if(a>0){var i=new Date;i.setTime(i.getTime()+24*a*3600*1e3),n=n+"; expires="+i.toGMTString()}n+=";path=/",document.cookie=n},t.getCookie=function(t){for(var e=document.cookie,a=e.split("; "),n=0;n<a.length;n++){var i=a[n].split("=");if(i[0]==t)return unescape(i[1])}return""},t.deleteCookie=function(t){var e=new Date;e.setTime(e.getTime()-1e4),document.cookie=t+"=v; expires="+e.toGMTString()+";path=/"}}(window),function(t){t.fn.extend({validate:function(){var e=t(this),a=e.find("input"),n=e.find("textarea"),i=[];a.each(function(){var e=t(this),a=e.attr("type")||"";"text/email/url/password/phonenumber/".indexOf(a)>-1&&i.push(e)}),n.each(function(){i.push(t(this))});for(var o=function(e,a){var n=null;0==(n=e.next(".help-inline")).length&&(n=t("<div class='help-inline'></div>"),e.after(n)),1==arguments.length?n.hide():(n.html(a),n.show())},r=!0,l=0,c=i.length;c>l;l++){var p,s,d,u,g,f,h,m=!0,v=i[l];if(s=v.attr("max"),d=v.attr("min"),u=v.attr("error")||"输入内容格式错误",g=v.attr("require"),f=v.attr("require_msg")||"不能为空",h=v.attr("patterns"),p=v.val(),("undefined"==typeof p||0==t.trim(p).length||null==p)&&(p=""),len=p.length,"undefined"!=typeof g||0!=len){if("require"==g&&0==len)o(v,f),m=!1;else if(d&&len<d)o(v,u),m=!1;else if(s&&len>s)o(v,u),m=!1;else if(h){var $=new RegExp(h);$.test(p)||(o(v,u),m=!1)}m&&o(v),!m&&(r=m)}else o(v)}return r}})}(jQuery);