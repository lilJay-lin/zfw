!function(){function a(){var a=$(this);a.hasClass("open")?a.find("ul").css("display","none"):a.find("ul").css("display","block"),a.toggleClass("open")}function t(){$(this).parent().find(".filename").html($(this).val())}$(document).delegate("li.submenu","click",a),$(document).delegate(".uploader input","change",t);var e=function(){var a=window.innerHeight;return"number"!=typeof a&&(a="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight),a-41-36}();$("div.container").css("min-height",e+"px")}(),function(a){function t(a){this.options={container:"",template:"",url:"",data:{}},$.extend(this.options,a),this.$container=$(this.options.container)}var e={mix:function(a,t,e){for(var n in t)a[t]&&e||(a[t]=e[t]);return a},toArray:function(a,t){return[].slice.call(a,t||0)},cookie:function(a,t,e){var n,i,o;return arguments.length>1?(e=e||30,(null===t||void 0===t)&&(e=-1),"number"==typeof e&&(n=24*e*60*60*1e3,i=e=new Date,i.setTime(i.getTime()+n)),t=String(t),document.cookie=[encodeURIComponent(a),"=",encodeURIComponent(t),"; expires=",e.toGMTString(),"; path='/'"].join("")):(o=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?decodeURIComponent(o[1]):null}};a.util=e,t.prototype={init:function(a){this.getPage(a)},setData:function(a){$.extend(this.options.data,a)},template:function(a,t){var e=Handlebars.compile($(a).html());return e(t)},getPage:function(a){var t=this,e=a||1,n=t.options.url+e;$.ajax({type:"GET",url:n,dataType:"json",async:!0,data:t.options.data,success:function(a){var e=a.items,n=a.pageinfo;t.$container.find(".page-data-list").html(t.template(t.options.template,e)),t.pagination(n)},error:function(){}})},pagination:function(a){var t=this;t.removePaginationHandle();var e=t.$container.find(".pagination"),n=t.$container.find(".datatable-info"),i=a.pagesize||10,o=(a.curpage-1)*i+1,r=a.curpage*i>=a.totalrows?a.totalrows:a.curpage*i;n.html("共"+a.totalrows+"条 当前展示第"+o+"条到第"+r+"条");for(var l=parseInt(a.curpage,10),c='<li  class="active"><a href="javascript:;"  data-page="'+l+'">'+l+" </a></li>",p=l-1,s=l+1,d="",g=parseInt(a.totalpage,10);p>l-4;p--)p>1&&(c='<li><a href="javascript:;" data-page="'+p+'">'+p+"</a></li>"+c);for(1!=l&&(2==p?d='<li><a href="javascript:;"  data-page="2">2</a>'+c:p>2&&(d='<li><a  href="javascript:;" class="blank">...</a></li>'+c),c='<li><a href="javascript:;"  data-page="1">1</a>'+d);l+4>s;s++)g>s&&(c+='<li><a href="javascript:;" data-page="'+s+'">'+s+"</a></li>");l!=g&&(s==g-1?c+='<li><a href="javascript:;"  data-page="'+(g-1)+'">'+(g-1)+"</a>":g-1>s&&(c+='<li><a href="javascript:;" class="blank">...</a></li>'),c+='<li><a href="javascript:;"  data-page="'+a.totalpage+'">'+a.totalpage+" </a></li>"),e.html(c),e.data("curpage",a.curpage),e.data("totalpage",a.totalpage),t.addPaginationHandle(e)},addPaginationHandle:function(){var a=this,t=a.$container.find(".pagination");a.paginationHandle=function(t){t.preventDefault();var e=$(this),n=e.data("page");"pre"==n?a.prex():"next"==n?a.next():a.getPage(n)},t.delegate("a","click",a.paginationHandle)},removePaginationHandle:function(){var a=this;a.$container.find(".pagination").undelegate("a","click",a.paginationHandle)},prex:function(){var a=this,t=a.$container.find(".pagination"),e=t.data("curpage")||0;console.log(e),e=e-1>0?e-1:1,a.getPage(e)},next:function(){var a=this,t=a.$container.find(".pagination"),e=t.data("curpage")||0,n=t.data("totalpage")||0;e=e+1>n?n:e+1,a.getPage(e)},reloadPage:function(){var a=this,t=a.$container.find(".pagination"),e=t.data("curpage")||0;a.getPage(e)}},a.Page=t}(window),function(a){a.fn.extend({validate:function(){for(var t=a(this),e=t.find("input"),n=function(t,e){var n=null;0==(n=t.next(".help-inline")).length&&(n=a("<div class='help-inline'></div>"),t.after(n)),1==arguments.length?n.hide():(n.html(e),n.show())},i=0,o=e.length;o>i;i++){var r=e.eq(i),l=r.attr("type");if(-1!="text/email/url/password/phonenumber/".indexOf(l)){var c,p,s,d,g,u,f;if(p=r.attr("max"),s=r.attr("min"),d=r.attr("error")||"输入内容格式错误",g=r.attr("require"),u=r.attr("require_msg")||"不能为空",f=r.attr("patterns"),c=r.val(),0==c.trim().length&&(c=""),len=c.length,"require"==g||c){if("require"==g&&!c)return n(r,u),!1;if(s&&len<s)return n(r,d),!1;if(p&&len>p)return n(r,d),!1;if(f){var h=new RegExp(f);if(!h.exec(c))return n(r,d),!1}n(r)}}}return!0}})}(jQuery);