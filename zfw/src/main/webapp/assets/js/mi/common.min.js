!function(){function t(){var t=$(this);t.hasClass("open")?t.find("ul").css("display","none"):t.find("ul").css("display","block"),t.toggleClass("open")}function a(){$(this).parent().find(".filename").html($(this).val())}$(document).delegate("li.submenu","click",t),$(document).delegate(".uploader input","change",a);var e=function(){var t=window.innerHeight;return"number"!=typeof t&&(t="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight),t-41-36}();$("div.container").css("min-height",e+"px")}(),function(t){function a(t){this.options={container:"",template:"",url:"",data:{}},$.extend(this.options,t),this.$container=$(this.options.container)}var e={mix:function(t,a,e){for(var n in a)t[a]&&e||(t[a]=e[a]);return t},toArray:function(t,a){return[].slice.call(t,a||0)},cookie:function(t,a,e){var n,i,o;return arguments.length>1?(e=e||30,(null===a||void 0===a)&&(e=-1),"number"==typeof e&&(n=24*e*60*60*1e3,i=e=new Date,i.setTime(i.getTime()+n)),a=String(a),document.cookie=[encodeURIComponent(t),"=",encodeURIComponent(a),"; expires=",e.toGMTString(),"; path='/'"].join("")):(o=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?decodeURIComponent(o[1]):null}};t.util=e,a.prototype={init:function(t){this.getPage(t)},setData:function(t){$.extend(this.options.data,t)},template:function(t,a){var e=Handlebars.compile($(t).html());return e(a)},getPage:function(t){var a=this,e=t||1,n=a.options.url+e;$.ajax({type:"GET",url:n,dataType:"json",async:!0,data:a.options.data,success:function(t){if(null==t||null==t.items||0==t.items.length){a.$container.find(".page-data-list").html("");var e=a.$container.find(".pagination");e.html("");var n=a.$container.find(".datatable-info");return void n.html("共0条")}var i=t.items,o=t.pageinfo;a.$container.find(".page-data-list").html(a.template(a.options.template,i)),a.pagination(o)},error:function(){}})},pagination:function(t){var a=this;a.removePaginationHandle();var e=a.$container.find(".pagination"),n=a.$container.find(".datatable-info"),i=t.pagesize||10,o=(t.curpage-1)*i+1,r=t.curpage*i>=t.totalrows?t.totalrows:t.curpage*i;n.html("共"+t.totalrows+"条 当前展示第"+o+"条到第"+r+"条");var l=parseInt(t.curpage,10);if("1"==t.totalpage)return void e.html("");for(var c='<li  class="active"><a href="javascript:;"  data-page="'+l+'">'+l+" </a></li>",p=l-1,d=l+1,s="",u=parseInt(t.totalpage,10);p>l-4&&p>1;p--)c='<li><a href="javascript:;" data-page="'+p+'">'+p+"</a></li>"+c;for(1!=l&&(2==p?s='<li><a href="javascript:;"  data-page="2">2</a>':p>2&&(s='<li><a  href="javascript:;" class="blank">...</a></li>'),c='<li><a href="javascript:;"  data-page="1">1</a>'+s+c);l+4>d&&u>d;d++)c+='<li><a href="javascript:;" data-page="'+d+'">'+d+"</a></li>";l!=u&&(d==u-1?c+='<li><a href="javascript:;"  data-page="'+(u-1)+'">'+(u-1)+"</a>":u-1>d&&(c+='<li><a href="javascript:;" class="blank">...</a></li>'),c+='<li><a href="javascript:;"  data-page="'+t.totalpage+'">'+t.totalpage+" </a></li>"),e.html(c),e.data("curpage",t.curpage),e.data("totalpage",t.totalpage),a.addPaginationHandle(e)},addPaginationHandle:function(){var t=this,a=t.$container.find(".pagination");t.paginationHandle=function(a){a.preventDefault();var e=$(this),n=e.data("page");"pre"==n?t.prex():"next"==n?t.next():t.getPage(n)},a.delegate("a","click",t.paginationHandle)},removePaginationHandle:function(){var t=this;t.$container.find(".pagination").undelegate("a","click",t.paginationHandle)},prex:function(){var t=this,a=t.$container.find(".pagination"),e=a.data("curpage")||0;console.log(e),e=e-1>0?e-1:1,t.getPage(e)},next:function(){var t=this,a=t.$container.find(".pagination"),e=a.data("curpage")||0,n=a.data("totalpage")||0;e=e+1>n?n:e+1,t.getPage(e)},reloadPage:function(){var t=this,a=t.$container.find(".pagination"),e=a.data("curpage")||0;t.getPage(e)}},t.Page=a,t.addCookie=function(t,a,e){var n=t+"="+escape(a);if(e>0){var i=new Date;i.setTime(i.getTime()+24*e*3600*1e3),n=n+"; expires="+i.toGMTString()}n+=";path=/",document.cookie=n},t.getCookie=function(t){for(var a=document.cookie,e=a.split("; "),n=0;n<e.length;n++){var i=e[n].split("=");if(i[0]==t)return unescape(i[1])}return""},t.deleteCookie=function(t){var a=new Date;a.setTime(a.getTime()-1e4),document.cookie=t+"=v; expires="+a.toGMTString()+";path=/"}}(window),function(t){t.fn.extend({validate:function(){for(var a=t(this),e=a.find("input"),n=function(a,e){var n=null;0==(n=a.next(".help-inline")).length&&(n=t("<div class='help-inline'></div>"),a.after(n)),1==arguments.length?n.hide():(n.html(e),n.show())},i=0,o=e.length;o>i;i++){var r=e.eq(i),l=r.attr("type");if(-1!="text/email/url/password/phonenumber/".indexOf(l)){var c,p,d,s,u,g,f;if(p=r.attr("max"),d=r.attr("min"),s=r.attr("error")||"输入内容格式错误",u=r.attr("require"),g=r.attr("require_msg")||"不能为空",f=r.attr("patterns"),c=r.val(),0==t.trim(c).length&&(c=""),len=c.length,"require"==u||c){if("require"==u&&!c)return n(r,g),!1;if(d&&len<d)return n(r,s),!1;if(p&&len>p)return n(r,s),!1;if(f){var h=new RegExp(f);if(!h.exec(c))return n(r,s),!1}n(r)}}}return!0}})}(jQuery);